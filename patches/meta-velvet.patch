--- velvet_1.1.02~nozlibcopy.orig/contrib/MetaVelvet-v0.3.1/Makefile
+++ velvet_1.1.02~nozlibcopy/contrib/MetaVelvet-v0.3.1/Makefile
@@ -1,14 +1,15 @@
 CC = gcc
 CFLAGS = -Wall
 DEBUG = -g
-LDFLAGS = -lm
+LIBS = -lm
 OPT = -O3
 MAXKMERLENGTH=31
 CATEGORIES=2
 DEF = -D MAXKMERLENGTH=$(MAXKMERLENGTH) -D CATEGORIES=$(CATEGORIES)
 
 Z_LIB_DIR=../../third-party/zlib-1.2.3
-Z_LIB_FILES=$(Z_LIB_DIR)/*.o
+# In Debian we do not use local zlib copy, however, we need to add $(LIBS) to compile options and thus we tweak this in here:
+Z_LIB_FILES=$(LIBS)
 
 # Mac OS users: uncomment the following lines
 # Z_LIB_FILES=
@@ -21,7 +22,7 @@
 OBJ = obj/tightString.o obj/run.o obj/splay.o obj/splayTable.o obj/graph.o obj/run2.o obj/fibHeap.o obj/fib.o obj/concatenatedGraph.o obj/passageMarker.o obj/graphStats.o obj/correctedGraph.o obj/dfib.o obj/dfibHeap.o obj/recycleBin.o obj/readSet.o obj/shortReadPairs.o obj/locallyCorrectedGraph.o obj/graphReConstruction.o obj/roadMap.o obj/preGraph.o obj/preGraphConstruction.o obj/concatenatedPreGraph.o obj/readCoherentGraph.o obj/crc.o obj/utility.o obj/kmer.o obj/scaffold.o
 OBJDBG = $(subst obj,obj/dbg,$(OBJ))
 
-default : cleanobj zlib obj meta-velveth meta-velvetg
+default : cleanobj obj meta-velveth meta-velvetg
 
 clean :
 	-rm obj/*.o obj/dbg/*.o ./meta-velvet* 
@@ -31,7 +32,8 @@
 	-rm obj/*.o obj/dbg/*.o 
 
 zlib : 
-	cd $(Z_LIB_DIR); ./configure; make; rm minigzip.o; rm example.o
+	# cd $(Z_LIB_DIR); ./configure; make; rm minigzip.o; rm example.o
+	echo "Use Debian packaged version of zlib"
 
 meta-velveth : obj 
 	$(CC) $(CFLAGS) $(OPT) $(LDFLAGS) -o meta-velveth obj/tightString.o obj/run.o obj/recycleBin.o obj/splay.o obj/splayTable.o obj/readSet.o obj/crc.o obj/utility.o obj/kmer.o $(Z_LIB_FILES)
--- velvet_1.1.02~nozlibcopy.orig/contrib/MetaVelvet-v0.3.1/src/readSet.c
+++ velvet_1.1.02~nozlibcopy/contrib/MetaVelvet-v0.3.1/src/readSet.c
@@ -32,7 +32,7 @@
 #if defined(_WIN32) || defined(__WIN32__) || defined(WIN32)
 #include "../third-party/zlib-1.2.3/Win32/include/zlib.h"
 #else
-#include "../third-party/zlib-1.2.3/zlib.h"
+#include <zlib.h>
 #endif
 
 #if defined(MSDOS) || defined(OS2) || defined(WIN32) || defined(__CYGWIN__)
